server:
  port: 9080

# JWT 설정
jwt:
  # 환경 변수로 관리 (보안 강화)
  # 개발: 기본값 사용, 프로덕션: 환경 변수 필수 설정
  secret: ${JWT_SECRET:mySecretKeyForJWTTokenGenerationThisKeyMustBeLongEnoughForHS512Algorithm}
  access-token-expiration: ${JWT_ACCESS_TOKEN_EXPIRATION:3600000}    # Access Token 만료 시간 (1시간 = 3600000ms)
  refresh-token-expiration: ${JWT_REFRESH_TOKEN_EXPIRATION:604800000}  # Refresh Token 만료 시간 (7일 = 604800000ms)

# OAuth 설정 (카카오, 구글 등)
oauth:
  kakao:
    # 환경 변수로 관리 (보안 강화)
    # 개발: 기본값 사용, 프로덕션: 환경 변수 필수 설정
    client-id: ${KAKAO_CLIENT_ID:f0bfa98dfa477735feeb8dbfdfa1d105}
    client-secret: ${KAKAO_CLIENT_SECRET:U4JgTAZGirCvVGmmnvuSlsoWlKFPstvV}
    redirect-uri: ${KAKAO_REDIRECT_URI:http://localhost:9080/api/auth/kakao/callback}
    # 카카오 API 엔드포인트 (변경될 가능성 낮음)
    authorization-uri: https://kauth.kakao.com/oauth/authorize
    token-uri: https://kauth.kakao.com/oauth/token
    user-info-uri: https://kapi.kakao.com/v2/user/me

logging:
  file:
    name: logs/myauth.log
  logback:
    rollingpolicy:
      max-file-size: 10MB
      max-history: 30

spring:
  application:
    name: myauth

  datasource:
    # 환경 변수로 관리 (보안 강화)
    url: ${DB_URL:jdbc:mysql://localhost:3306/emma?useSSL=false&serverTimezone=Asia/Seoul&connectionTimeZone=Asia/Seoul&forceConnectionTimeZoneToSession=true&allowPublicKeyRetrieval=true}
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:1234}
    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    hibernate:
      ddl-auto: create
      # none : 실제 Database에 아무런 영향을 주지 않음, 테이블 생성 자동화 없음
      # validate: 엔티티와 테이블 구조가 일치하는지 검증만 함, 수정하지 않음, 일치하지 않으면 예외발생
      # update : 엔티티 변경사항을 기반으로 DB테이블을 자동으로 업데이트함, 컬럼 삭제 안됨, 기존데이터 유지
      # create : 어플리케이션을 실행할때마다 기존테이블 삭제 -> 새롭게 테이블 생성, 기존데이터 모두 삭제, 테스트용 개발 초기에만 사용
      # create-drop : create와 동일하지만 app종료 시점에 테이블 전체 drop
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQLDialect
        # Hibernate가 DB에 날짜/시간을 저장할 때 사용할 타임존 (한국 시간)
        jdbc:
          time_zone: Asia/Seoul

  # 파일 업로드 설정
  servlet:
    multipart:
      enabled: true
      max-file-size: 10MB          # 업로드 가능한 최대 파일 크기
      max-request-size: 10MB       # 전체 요청의 최대 크기
      file-size-threshold: 2KB     # 메모리에 저장할 임계값

# 파일 저장 경로 설정 (커스텀)
file:
  upload:
    dir: ${FILE_UPLOAD_DIR:./uploads}                           # 파일 저장 디렉토리
    base-url: ${FILE_UPLOAD_BASE_URL:http://localhost:9080/uploads}  # 파일 접근 URL
